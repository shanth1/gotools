# `notify` Package

The `notify` package provides services for sending notifications through different channels like Telegram and Email. Each notifier is created and used independently.

### Telegram Notifier

Requires a bot token and the target chat ID. The notifier automatically tries to send messages with MarkdownV2 formatting and falls back to plain text if parsing fails.

```go
package main

import (
	"context"
	"errors"
	"fmt"
	"os"

	"github.com/shanth1/gotools/notify"
)

func main() {
	token := os.Getenv("TELEGRAM_TOKEN")
	chatID := os.Getenv("TELEGRAM_CHAT_ID")

	tgNotifier, err := notify.NewTelegramNotifier(token)
	if err != nil {
		// ... handle error ...
	}

	msg := notify.Message{
		Text: "Test message with *MarkdownV2* formatting.",
	}

	if err := tgNotifier.Send(context.Background(), chatID, msg); err != nil {
		if errors.Is(err, notify.ErrMarkdownFallback) {
			fmt.Println("Message sent, but markdown was stripped.")
		} else {
			// ... handle other errors ...
		}
	}

	fmt.Println("Telegram message sent successfully!")
}
```

### Email (SMTP) Notifier

Requires SMTP server configuration to send emails.

```go
package main

import (
	"context"
	"fmt"
	"github.com/shanth1/gotools/notify"
)

func main() {
	emailCfg := notify.EmailConfig{
		Host:     "smtp.example.com",
		Port:     587,
		Username: "user@example.com",
		Password: "your-password",
		From:     "sender@example.com", // Optional, defaults to Username
	}

	emailNotifier, err := notify.NewEmailNotifier(emailCfg)
	if err != nil {
		// ... handle error ...
	}

	msg := notify.Message{
		Subject: "Email Subject",
		Text:    "This is the email body.",
	}

	recipient := "recipient@example.com"
	if err := emailNotifier.Send(context.Background(), recipient, msg); err != nil {
		// ... handle error ...
	}

	fmt.Println("Email sent successfully!")
}
```
