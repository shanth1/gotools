# `ctx` Package

The `ctx` package provides helpers for managing the application lifecycle (graceful shutdown) and for handling request-scoped values in `context.Context`.

## Usage

### Graceful Shutdown

The `WithGracefulShutdown` function creates two contexts: one for the application, which is canceled by an OS signal, and a second one for the shutdown process with a timeout.

```go
import (
	"fmt"
	"net/http"
	"time"

	"github.com/shanth1/gotools/ctx"
)

func main() {
	// Create contexts for the app and its shutdown period.
	appCtx, shutdownCtx, cancel, shutdownCancel := ctx.WithGracefulShutdown(10 * time.Second)
	defer cancel()
	defer shutdownCancel()

	server := &http.Server{Addr: ":8080"}

	// Run the server in a goroutine
	go server.ListenAndServe()

	// Wait for an OS signal (e.g., Ctrl+C)
	<-appCtx.Done()
	fmt.Println("Shutdown signal received. Shutting down gracefully...")

	// Attempt to shut down the server within the timeout
	if err := server.Shutdown(shutdownCtx); err != nil {
		fmt.Printf("Server shutdown failed: %v\n", err)
	}
}
```

### Context Values

The package provides functions to safely add and extract common values like request IDs or user IDs.

```go
import (
	"context"
	"fmt"

	"github.com/shanth1/gotools/ctx"
)

func processRequest(c context.Context) {
	if reqID, ok := ctx.RequestIDFrom(c); ok {
		fmt.Printf("Processing request with ID: %s\n", reqID)
	} else {
		fmt.Println("No request ID found in context.")
	}
}

func main() {
	// Create a context with a request ID
	c := ctx.WithRequestID(context.Background(), "req-abc-123")
	processRequest(c) // Output: Processing request with ID: req-abc-123
}
```
